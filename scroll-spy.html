<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html {
        scroll-behavior: smooth;
      }

      .scroll-spy-anchors {
        position: fixed;
        left: 0;
        width: 150px;
      }
      .wrapper {
        margin: auto;
        width: 1000px;
      }
      li.active,
      li.active > a {
        color: red;
      }
      li,
      li > a {
        transition: color 0.3s;
      }
    </style>
  </head>
  <body>
    <ul class="scroll-spy-anchors">
      <li><a href="#h1">H1</a></li>
      <li><a href="#h2">H2</a></li>
      <li><a href="#h3">H3</a></li>
      <li><a href="#h4">H4</a></li>
      <li><a href="#h5">H5</a></li>
      <li><a href="#h6">H6</a></li>
      <li><a href="#h7">H7</a></li>
      <li><a href="#h8">H8</a></li>
    </ul>
    <div class="wrapper">
      <h1 id="h1">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi
        temporibus veritatis ab modi eligendi quia at accusamus enim sequi.
        Placeat quia ratione esse rerum alias sequi nostrum asperiores hic
        expedita.
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta, debitis
        modi reiciendis minus nobis explicabo incidunt aut vel optio facilis id
        sapiente consequuntur! Rem, earum! Aliquam natus obcaecati repellat
        laborum.
      </p>
      <p>
        Facilis ut corrupti explicabo autem ipsum accusamus ad voluptas nisi?
        Eaque voluptate, nesciunt laboriosam sapiente obcaecati ullam veritatis
        cum aliquam corporis placeat quos necessitatibus minima quas voluptatem,
        esse corrupti blanditiis.
      </p>
      <p>
        Laborum sapiente totam odio quibusdam voluptatibus illum, alias sunt
        ratione. Corrupti, dicta! Quo quod aliquam nobis? Ratione alias sequi
        ipsa laboriosam, consequatur eligendi eaque asperiores nesciunt,
        consequuntur, eum sunt quia.
      </p>
      <p>
        Delectus veritatis fugit beatae accusamus maxime praesentium commodi
        voluptatum eum molestiae porro, odio eveniet in rem soluta architecto
        deleniti ex. Aperiam et, modi incidunt tempora sint labore ut placeat
        tempore.
      </p>
      <p>
        Sit quo cumque, iure officia nesciunt quisquam mollitia earum excepturi
        vero asperiores dolore sequi in assumenda debitis maxime natus ab neque
        voluptate quos blanditiis nobis! Nihil pariatur tempore quaerat
        delectus.
      </p>
      <p>
        Optio sunt voluptatum quas, ullam odio laudantium, nam, voluptates nemo
        velit voluptas doloremque. Deserunt, ea, fuga officiis doloribus porro
        rerum laboriosam veritatis excepturi neque esse nihil commodi! Unde,
        ratione voluptatum.
      </p>
      <h1 id="h2">
        Quae molestiae optio dolor enim? Recusandae saepe reprehenderit corporis
        cumque facilis autem! Suscipit non porro, doloremque libero earum
        expedita aspernatur ducimus excepturi delectus consectetur ipsum,
        deleniti laboriosam modi, optio doloribus?
      </h1>
      <p>
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum
        voluptate rem quas quia ad velit pariatur incidunt vel minus et ducimus
        illum, corrupti illo nulla doloremque adipisci, numquam commodi
        recusandae?
      </p>
      <p>
        Necessitatibus nostrum iusto fugit, est nisi delectus accusantium a quas
        maiores veritatis distinctio illo, cupiditate nam voluptate commodi
        aspernatur facilis incidunt quo illum eum! Nam similique molestiae dolor
        sapiente rem.
      </p>
      <p>
        Dolorum cum aut, quod officia quos deleniti veritatis natus consequuntur
        eos repellendus blanditiis amet odio vitae delectus nam ducimus dolores
        reiciendis ipsa, eum corrupti mollitia. Maxime nobis impedit odit
        dignissimos.
      </p>
      <p>
        Eligendi necessitatibus praesentium laudantium quas, assumenda officia
        voluptatum tempore quibusdam consequatur illo quisquam iure odit error
        laborum soluta natus perferendis doloremque debitis fugiat neque est
        dicta ab voluptatibus itaque! Consequatur.
      </p>
      <p>
        Porro distinctio magnam sit sunt? Incidunt veniam tenetur, ex quasi sed
        perferendis nostrum delectus illo temporibus, adipisci iure ipsam
        voluptatum quibusdam. Aliquam libero inventore excepturi accusantium
        blanditiis unde molestias. Natus!
      </p>
      <p>
        Dignissimos, est voluptatem unde accusamus, rem possimus itaque
        veritatis voluptate beatae expedita fugiat ducimus vitae magnam veniam
        quae sit quo inventore corporis iure laboriosam tenetur necessitatibus
        placeat totam repellendus! Perferendis.
      </p>
      <h1 id="h3">
        Asperiores ducimus necessitatibus maiores, est doloremque explicabo
        voluptates debitis nostrum voluptatibus eligendi incidunt, sit suscipit
        fugiat dolores rem laudantium hic? Earum ratione quisquam exercitationem
        commodi ducimus beatae iure cumque illo.
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore numquam
        veritatis rerum saepe soluta enim placeat, recusandae eos? Hic dolor,
        aliquam molestiae deserunt voluptatem aspernatur tenetur repellendus
        sequi? A, itaque.
      </p>
      <p>
        Necessitatibus culpa esse asperiores quis alias quod cupiditate sed?
        Magni explicabo cum quasi sunt impedit eos soluta dolores aliquid eaque
        commodi ea voluptatem, cupiditate voluptatibus exercitationem quaerat
        adipisci. Fugit, maxime.
      </p>
      <p>
        Sit iure optio eos nobis, doloribus at qui ea ducimus maxime pariatur,
        autem quae veritatis nostrum eaque incidunt, explicabo dolores!
        Assumenda possimus unde quae blanditiis iste accusamus ipsam dicta
        molestias?
      </p>
      <p>
        Tempora, quidem delectus. Labore, amet! Soluta voluptas in ullam at ea
        magni corporis unde reprehenderit, modi odio sint quaerat, suscipit
        totam architecto rem aut tempore, repellat ab? Architecto, quaerat rem.
      </p>
      <p>
        Possimus reprehenderit eius laudantium nihil, error recusandae. Quasi
        nam, nesciunt doloremque dicta sed, accusantium accusamus maiores
        aspernatur doloribus voluptas ab incidunt error amet suscipit quam odio
        nobis voluptatem! Tenetur, sapiente?
      </p>
      <p>
        Fugiat, vel impedit provident iure quisquam quae laboriosam corporis
        nostrum reprehenderit accusamus unde saepe tenetur ea, autem officia,
        reiciendis quis. Eveniet provident nesciunt itaque odit cupiditate quae
        dolores, excepturi accusamus!
      </p>
      <h1 id="h4">
        Harum sapiente, culpa recusandae nobis consectetur earum eum provident.
        Neque voluptates, veniam maxime quod id placeat sapiente nulla
        aspernatur quia explicabo exercitationem nobis voluptas velit dolore
        natus eligendi culpa officiis!
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Neque
        molestias libero, praesentium velit error magnam corrupti minima fugit
        quos voluptate unde iure corporis impedit, dolor nisi! Enim quasi
        laudantium rerum.
      </p>
      <p>
        Fuga, odit asperiores itaque quis quo pariatur nisi ratione ipsam
        dolorum! Itaque, numquam optio harum inventore sint sapiente nemo
        repellat debitis eos deserunt rerum reiciendis sunt hic quaerat id
        assumenda.
      </p>
      <p>
        Molestias ipsam necessitatibus saepe. Ullam vero laboriosam tenetur
        accusamus inventore! Quam excepturi provident officiis maxime unde
        obcaecati quod libero hic deleniti earum voluptas autem porro, quidem,
        possimus harum blanditiis aperiam?
      </p>
      <p>
        Error voluptates inventore magnam ratione amet dicta ab cumque, eaque
        voluptate autem dolores deserunt perspiciatis enim explicabo repudiandae
        aliquam consequuntur sapiente non quae aspernatur corporis doloremque,
        nulla voluptatum maxime. Numquam.
      </p>
      <p>
        Aliquam cum vero officia accusantium eum dolores mollitia molestias
        accusamus aut necessitatibus obcaecati perferendis sed rem quis, quas
        unde nesciunt labore pariatur praesentium commodi sint laborum?
        Provident perspiciatis optio tempore!
      </p>
      <p>
        Provident neque delectus dolorum labore obcaecati quos cumque
        consectetur magni enim repudiandae aut voluptatum minus praesentium
        inventore, ipsam cum accusamus. Autem labore enim repellat ad accusamus
        quam esse sunt reprehenderit!
      </p>
      <h1 id="h5">
        Officia nobis, hic tenetur accusamus nesciunt numquam aliquam ipsa
        praesentium exercitationem ullam veritatis! Ab ullam, possimus aliquam
        dicta aspernatur, earum, quaerat exercitationem cupiditate doloremque
        repudiandae nihil vel quos inventore? Commodi.
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi a
        reprehenderit nihil vero enim laboriosam ad deserunt voluptatum
        cupiditate eaque, suscipit, modi iusto veritatis! Veniam, natus fugiat.
        Placeat, praesentium dolorem.
      </p>
      <p>
        Molestiae nisi veniam eligendi rem, atque dolor consequuntur unde quam
        quisquam maxime voluptatibus eaque fuga, numquam magni nihil inventore
        non. Harum a ullam sit facilis! Cum deleniti mollitia quia est?
      </p>
      <p>
        Aliquid atque magnam iusto hic nulla quo vel officia, doloremque a odit
        temporibus molestiae nostrum cupiditate dolorum explicabo delectus
        architecto veniam culpa? Odit quibusdam possimus incidunt illum porro
        veniam ipsum.
      </p>
      <p>
        Laborum corrupti, laudantium iste qui tempora architecto? Maxime dicta
        magni id cupiditate vitae consequatur suscipit accusamus labore ipsam
        consequuntur est ducimus aspernatur quasi ipsa commodi facilis sit, quia
        molestiae veritatis!
      </p>
      <p>
        Enim ipsam tempora consectetur, at similique quasi quam repellat
        doloribus dolorum eveniet voluptas reiciendis laborum odio blanditiis
        nihil adipisci accusamus, incidunt atque! Maiores incidunt ipsum magni
        optio cumque dicta aspernatur!
      </p>
      <p>
        Placeat, natus! Dignissimos, obcaecati. Recusandae cupiditate, incidunt,
        ab est fugiat corrupti nesciunt a nam dicta dolorum qui maxime,
        molestiae odit nemo eligendi. Vel explicabo cum, reiciendis non veniam
        aliquid necessitatibus?
      </p>
      <h1 id="h6">
        Voluptate veniam nam illum maiores a qui aperiam sint, cum nihil aut
        reprehenderit enim nesciunt voluptates ut quibusdam quaerat assumenda
        voluptatibus dolores officia consectetur, dolore magni tempora sunt
        eveniet. Quae!
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatibus
        nemo maxime rem adipisci magni debitis porro ut odit vel illum,
        reiciendis laborum ad, temporibus itaque aliquam rerum esse laudantium
        placeat.
      </p>
      <p>
        Animi iure, earum perferendis voluptate consequatur enim consequuntur
        repellendus harum consectetur sint porro error est obcaecati et unde
        ipsum impedit minus? Officia recusandae libero qui soluta enim eius
        quaerat! Facere.
      </p>
      <p>
        Sunt quae velit, consequuntur quo at porro. Hic officia, dolore eaque
        deserunt odit sapiente rerum saepe? Amet fugit expedita vel temporibus,
        voluptatem laudantium, commodi recusandae voluptatibus fuga repudiandae
        in aspernatur!
      </p>
      <p>
        Nisi laboriosam et veritatis ipsa deleniti, inventore repudiandae
        accusamus maxime ex, consequatur consectetur quos molestiae. Maiores
        minima facere doloribus inventore laboriosam numquam. Unde enim
        accusamus magni a officiis dolores alias?
      </p>
      <p>
        Hic id repellendus repellat, nostrum recusandae quod possimus soluta
        praesentium nesciunt quidem ad nobis neque laboriosam in! Fugit,
        repellendus deserunt sequi assumenda vero maxime aperiam! Consectetur
        minus cupiditate quaerat facere.
      </p>
      <p>
        Odit reprehenderit harum illum culpa corrupti laborum, et minima omnis
        quam autem numquam inventore maxime ab repudiandae illo ipsum obcaecati
        ut voluptas porro unde! Cumque adipisci doloremque alias id ratione.
      </p>
      <h1 id="h7">
        Iure, fuga distinctio laudantium possimus facere perspiciatis excepturi
        quis tempora nihil reiciendis totam nostrum debitis explicabo provident
        vel est nemo pariatur dolorem ex nam fugit. Quia expedita neque nam.
        Eum?
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Et pariatur
        delectus excepturi eaque alias molestias quisquam deserunt. Dicta,
        quaerat commodi! Laboriosam ea eum, accusantium asperiores eveniet
        veritatis quo nulla omnis.
      </p>
      <p>
        Libero odit tenetur molestias optio nesciunt nihil. Soluta ducimus nisi
        quaerat fugit quibusdam asperiores quo magni nemo mollitia quia
        recusandae dignissimos, quidem fuga eos aut excepturi maiores assumenda
        ullam nesciunt!
      </p>
      <p>
        Quam labore magni quibusdam cupiditate error quis facilis vel aspernatur
        obcaecati non nostrum saepe exercitationem odio ab illum blanditiis
        dicta assumenda, alias provident illo deserunt, dignissimos molestias
        nesciunt itaque. Ratione?
      </p>
      <p>
        Recusandae, quis, debitis repellendus deleniti velit tempora illo dicta
        quasi officia voluptas dolores explicabo iusto molestiae. Vitae culpa
        quos consectetur eaque voluptatibus, reiciendis excepturi fugiat vero
        neque, ratione, vel cumque?
      </p>
      <p>
        Ipsum necessitatibus repellendus amet mollitia pariatur reiciendis?
        Accusantium, voluptate? Commodi numquam ut officiis cupiditate. Ratione
        itaque, facilis laudantium quam ea inventore iste ducimus dolores
        voluptatum totam? Enim facere odio quos.
      </p>
      <p>
        Non ratione sint dolorem tempora nostrum, magni ipsum culpa rem dolorum
        veniam quasi dolor maiores fugiat voluptatum vitae esse officiis eaque,
        ipsa quos labore eos saepe dignissimos aspernatur molestiae. Saepe.
      </p>
      <h1 id="h8">
        Quaerat reprehenderit pariatur dolorem repellendus. Voluptatibus
        mollitia impedit explicabo earum aut praesentium beatae corrupti
        incidunt velit aperiam, corporis quo blanditiis qui! Ab molestias
        dolorem temporibus magni recusandae culpa natus optio!
      </h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Porro nemo
        iusto dolore incidunt reiciendis soluta nulla et, amet provident
        doloribus nisi laboriosam error blanditiis? Quibusdam doloremque itaque
        assumenda ullam debitis.
      </p>
      <p>
        Et fugiat itaque ducimus atque nulla quam minima dolorem, eveniet
        explicabo fugit error in iure eligendi facilis sapiente perspiciatis
        deleniti perferendis nihil enim vero soluta ipsam! Sed quaerat
        laudantium optio.
      </p>
      <p>
        Veritatis ea tempora assumenda eos repudiandae pariatur quisquam,
        mollitia dolore adipisci aspernatur voluptatum possimus officia in
        accusantium distinctio ipsum, cumque repellat corrupti fugit quo facilis
        delectus suscipit debitis error? Iure.
      </p>
      <p>
        Qui doloribus recusandae omnis, sapiente dolorum facere, obcaecati sunt
        laboriosam at sed facilis iure dolor inventore rerum pariatur ut
        consequatur veniam? Voluptate dolorem ullam labore architecto inventore
        et, cum cumque.
      </p>
      <p>
        Fugit quas facilis error enim magni? Magni cupiditate ab quas assumenda
        voluptatem totam, nemo tempora voluptate natus tempore explicabo
        veritatis consequuntur? Maiores nemo quis possimus quam necessitatibus
        eligendi doloremque optio.
      </p>
      <p>
        Sequi dolores earum laudantium necessitatibus consectetur, perspiciatis
        sed nobis ex expedita nulla tempora mollitia, neque iste a laborum magni
        accusamus esse sit dicta dolorem sint, beatae doloremque perferendis
        quaerat. Voluptas!
      </p>
    </div>

    <script>
      let ul = document.querySelector('ul');
      let wrapper = document.querySelector('.wrapper');
      let headers = Array.from(document.querySelectorAll('h1'));

      window.addEventListener('scroll', function (e) {
        for (let li of ul.children) {
          li.classList.remove('active');
        }

        let visibleTopMost = headers.filter(it => {
          let rect = it.getBoundingClientRect();
          return rect.top > 0;
        })[0];
        let id = visibleTopMost.id;
        let anchor = document.querySelector(`a[href="#${id}"]`);

        anchor.parentNode.classList.add('active');
      });
    </script>
  </body>
</html>
